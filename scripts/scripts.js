const getCookie=e=>{let t=e+"=",n=document.cookie.split(";");for(let o=0;o<n.length;o++){let l=n[o];for(;" "==l.charAt(0);)l=l.substring(1,l.length);if(0==l.indexOf(t))return l.substring(t.length,l.length)}return null},setCookie=(e,t,n=365)=>{let o=new Date;o.setTime(o.getTime()+864e5*n);let l="; expires="+o.toUTCString();document.cookie=e+"="+(t||"")+l+";path=/;SameSite=None;Secure"},applyTheme=e=>{let t=document.getElementById("theme-stylesheet");t&&(t.href=e)};applyTheme(getCookie("theme")||"/styles/default-modern.css"),document.addEventListener("DOMContentLoaded",function(){let e=()=>{getCookie("version")||setCookie("version","Release 1.8.8"),getCookie("theme")||setCookie("theme","/styles/default-modern.css"),getCookie("ClientEPK1_8")||setCookie("ClientEPK1_8","default-1.8.epk"),getCookie("ClientEPK1_5")||setCookie("ClientEPK1_5","default-1.5.epk");let e=document.getElementById("version-selector"),t=document.getElementById("theme-selector"),n=document.getElementById("client-theme-1.8"),o=document.getElementById("client-theme-1.5");e&&(e.value=getCookie("version")),t&&(t.value=getCookie("theme")),n&&(n.value=getCookie("ClientEPK1_8")),o&&(o.value=getCookie("ClientEPK1_5")),applyTheme(getCookie("theme")||"/styles/default-modern.css")},t=()=>{let e=document.getElementById("version-selector"),t=document.getElementById("theme-selector"),n=document.getElementById("client-theme-1.8"),o=document.getElementById("client-theme-1.5");e&&setCookie("version",e.value),t&&(setCookie("theme",t.value),applyTheme(t.value)),n&&setCookie("ClientEPK1_8",n.value),o&&setCookie("ClientEPK1_5",o.value)},n=document.querySelectorAll("nav ul li a"),o=document.querySelectorAll(".content");n.forEach(e=>{e.addEventListener("click",function(t){if("about-tab"===this.id||"discord-tab"===this.id||"reddit-tab"===this.id||"legal-tab"===this.id||"terms-tab"===this.id||"privacy-tab"===this.id)return;t.preventDefault(),n.forEach(e=>e.classList.remove("active")),e.classList.add("active");let o=e.id.split("-")[0];l(o)})});let l=n=>{let l=document.getElementById(n);if(!l){console.error(`Content section for ${n} not found`);return}o.forEach(e=>{e.classList.remove("active"),e.innerHTML="",e.style.display="none"}),l.style.display="block",fetch(`${n}.html`).then(e=>{if(!e.ok)throw Error("Network response was not ok :( "+e.statusText);return e.text()}).then(o=>{if(l.innerHTML=o,l.classList.add("active"),"settings"===n){e();let r=document.getElementById("version-selector"),a=document.getElementById("theme-selector"),s=document.getElementById("client-theme-1.8"),c=document.getElementById("client-theme-1.5");r&&a&&s&&c&&(r.addEventListener("change",t),a.addEventListener("change",t),s.addEventListener("change",t),c.addEventListener("change",t))}"home"===n&&i()}).catch(e=>{l.innerHTML="<p>Failed to load content.</p>",console.error("Error loading page:",e)})},r=e=>{let t;switch(e){case"Release 1.8.8":t="./1.8/index.html";break;case"Beta 1.7.3":t="./1.7/index.html";break;case"Release 1.5.2":t="./1.5/index.html";break;case"Beta 1.3":t="./1.3/index.html";break;case"Alpha 1.2.6":t="./1.2/index.html";break;case"Infdev":t="./Infdev/index.html";break;case"Indev":t="./Indev/index.html";break;default:t="./1.8/index.html",console.error("Unknown version:",e,"launching 1.8 instead.")}t&&fetch(t).then(e=>{if(!e.ok)throw Error("Network response was not ok "+e.statusText);return e.text()}).then(e=>{let t=new DOMParser,n=t.parseFromString(e,"text/html");document.open(),document.write(n.documentElement.outerHTML),document.close()}).catch(e=>{console.error("Error loading version content:",e),console.error("Error name:",e.name),console.error("Error message:",e.message),console.error("Error stack:",e.stack)})},i=()=>{let e=document.getElementById("play-button");e?e.addEventListener("click",e=>{if("Yes"!==getCookie("AcceptedTerms"))e.preventDefault(),alert("Please accept the terms before playing."),a();else{let t=getCookie("version");t?r(t):console.error("Version not found in cookies! :(")}}):console.error("Play button not found :(")},a=()=>{let e=document.createElement("div");e.id="terms-overlay",e.innerHTML=`
            <div id="terms-box">
                <h2>Welcome, User</h2>
                <p>Before you proceed, please review and accept our:</p>
                <ul>
                    <li><a href="/terms/" target="_blank" rel="noopener">Terms of Service</a></li>
                    <li><a href="/privacy/" target="_blank" rel="noopener">Privacy Policy</a></li>
                    <li><a href="/legal/" target="_blank" rel="noopener">Legal Disclaimer</a></li>
                    <li><a href="/credits/" target="_blank" rel="noopener">Credits</a></li>
                </ul>
                <p>By clicking "Accept", you agree to be bound by these documents.</p>
                <button id="accept-terms">Accept</button>
            </div>
        `,document.body.appendChild(e);let t=document.getElementById("accept-terms");t&&t.addEventListener("click",()=>{setCookie("AcceptedTerms","Yes",365),e.remove()})};e();let s=document.getElementById("theme-selector");s&&s.addEventListener("change",function(){setCookie("theme",this.value),applyTheme(this.value)}),l("home"),i(),"Yes"!==getCookie("AcceptedTerms")&&a()});