const contentCache={},cookieCache={},elements={};function initApp(){cacheElements(),initializeCookies(),setupEventListeners(),loadContent("home"),checkTermsAcceptance()}function cacheElements(){["version-selector","theme-selector","client-theme-1.8","client-theme-1.5","play-button","legal-tab","social-tab"].forEach((e=>{elements[e]=document.getElementById(e)})),elements.legalSubmenu=document.querySelector(".legal-submenu"),elements.socialSubmenu=document.querySelector(".social-submenu"),elements.navItems=document.querySelectorAll("nav ul li a"),elements.contentSections=document.querySelectorAll(".content")}function initializeCookies(){document.cookie.split(";").forEach((e=>{const[t,n]=e.trim().split("=");cookieCache[t]=n})),cookieCache.version||setCookie("version","Release 1.8.8"),cookieCache.theme||setCookie("theme","/styles/default-modern.css"),cookieCache.ClientEPK1_8||setCookie("ClientEPK1_8","default-1.8.epk"),cookieCache.ClientEPK1_5||setCookie("ClientEPK1_5","default-1.5.epk"),applyTheme(cookieCache.theme||"/styles/default-modern.css")}function setupEventListeners(){document.addEventListener("click",handleGlobalClick),elements["theme-selector"]?.addEventListener("change",handleThemeChange),elements["play-button"]?.addEventListener("click",handlePlayClick)}function handleGlobalClick(e){const t=e.target;t.matches("nav ul li a")?handleNavClick(e,t):t.matches(".legal-submenu li a, .social-submenu li a")&&e.stopPropagation()}function handleNavClick(e,t){e.preventDefault(),"legal-tab"===t.id||"social-tab"===t.id?toggleSubmenu(t):["gitea-tab","about-tab","discord-tab","reddit-tab","terms-tab","privacy-tab","legal-info-tab","forum-tab"].includes(t.id)||(setActiveNavItem(t),loadContent(t.id.split("-")[0]))}function toggleSubmenu(e){const t="legal-tab"===e.id?elements.legalSubmenu:elements.socialSubmenu,n=e.querySelector(".fa-chevron-down");e.classList.toggle("active"),t.classList.toggle("active"),n&&(n.style.transform=e.classList.contains("active")?"rotate(-90deg)":"rotate(0deg)")}function setActiveNavItem(e){elements.navItems.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),[elements["legal-tab"],elements["social-tab"]].forEach((e=>{e.classList.remove("active");(e===elements["legal-tab"]?elements.legalSubmenu:elements.socialSubmenu).classList.remove("active");const t=e.querySelector(".fa-chevron-down");t&&(t.style.transform="rotate(0deg)")}))}function loadContent(e){const t=document.getElementById(e);t?(elements.contentSections.forEach((e=>{e.classList.remove("active"),e.style.display="none"})),t.style.display="block",contentCache[e]?renderContent(t,contentCache[e]):fetch(`${e}.html`).then((e=>{if(!e.ok)throw new Error(`Network response was not ok :( ${e.statusText}`);return e.text()})).then((n=>{contentCache[e]=n,renderContent(t,n)})).catch((e=>{console.error("Error loading page:",e),t.innerHTML="<p>Failed to load content.</p>"}))):console.error(`Content section for ${e} not found`)}function renderContent(e,t){e.innerHTML=t,e.classList.add("active"),"settings"===e.id&&initializeSettingsPage()}function initializeSettingsPage(){["version-selector","theme-selector","client-theme-1.8","client-theme-1.5"].forEach((e=>{const t=document.getElementById(e);t&&(t.value=cookieCache[e.replace("-selector","").replace("client-theme-","ClientEPK")],t.addEventListener("change",updateSettings))}))}function updateSettings(){["version","theme","ClientEPK1_8","ClientEPK1_5"].forEach((e=>{const t=document.getElementById(e.replace("ClientEPK","client-theme-").replace("version","version-selector").replace("theme","theme-selector"));t&&(setCookie(e,t.value),"theme"===e&&applyTheme(t.value))}))}function handleThemeChange(){const e=this.value;setCookie("theme",e),applyTheme(e)}function handlePlayClick(e){"Yes"!==cookieCache.AcceptedTerms?(e.preventDefault(),alert("Please accept the terms before playing."),showTermsOverlay()):launchGame(cookieCache.version)}function launchGame(e){fetch({"Release 1.8.8":"/clients/1.8/index.html","Beta 1.7.3":"/clients/1.7/index.html","Release 1.5.2":"/clients/1.5/index.html","Precision Client 1.5.2":"/clients/Precision/index.html","Beta 1.3":"/clients/1.3/index.html","Release 1.2.5":"/clients/1.2/index.html",EaglerForge:"/clients/EaglerForge/index.html","Resent Client 4.0":"/clients/Resent/index.html","Shadow Client 4.0":"/clients/Shadow/index.html","Kone Client":"/clients/Kone/index.html","Astra Client 1.2":"/clients/Astra/index.html",Indev:"/clients/Indev/index.html","Alpha 1.2.6":"/clients/Alpha-1.2/index.html"}[e]||"/clients/1.8/index.html").then((e=>{if(!e.ok)throw new Error(`Network response was not ok, ${e.statusText}`);return e.text()})).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html");document.open(),document.write("<!DOCTYPE html>"+t.documentElement.outerHTML),document.close()})).catch((e=>{console.error("Error loading version content:",e),console.error("Error name:",e.name),console.error("Error message:",e.message),console.error("Error stack:",e.stack)}))}function showTermsOverlay(){const e=document.createElement("div");e.id="terms-overlay",e.innerHTML='\n    <div id="terms-box">\n      <h2>Welcome!</h2>\n      <p>Before you proceed, review and accept our:</p>\n      <ul>\n        <li><a href="/terms/" rel="noopener noreferrer" target="_blank">Terms of Service</a></li>\n        <li><a href="/privacy/" rel="noopener noreferrer" target="_blank">Privacy Policy</a></li>\n        <li><a href="/legal/" rel="noopener noreferrer" target="_blank">Legal Disclaimer</a></li>\n        <li><a href="/credits/" rel="noopener noreferrer" target="_blank">Credits</a></li>\n      </ul>\n      <p>By clicking "Accept," you agree to be bound by these documents.</p>\n      <button id="accept-terms">Accept</button>\n    </div>\n  ',document.body.appendChild(e),document.getElementById("accept-terms").addEventListener("click",(()=>{setCookie("AcceptedTerms","Yes",365),cookieCache.AcceptedTerms="Yes",e.remove()}))}function checkTermsAcceptance(){"Yes"!==cookieCache.AcceptedTerms&&showTermsOverlay()}function setCookie(e,t,n=365){const o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);const l=`; expires=${o.toUTCString()}`;document.cookie=`${e}=${t}${l};path=/;SameSite=None;Secure`,cookieCache[e]=t}function applyTheme(e){const t=document.getElementById("theme-stylesheet");t&&(t.href=e)}document.addEventListener("DOMContentLoaded",initApp);